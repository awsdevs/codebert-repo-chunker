# ============================================================================
# CORE CONFIGURATION
# ============================================================================

# Environment
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE_PATH=logs/pipeline.log

# Application
APP_NAME=CodeAnalysisPipeline
APP_VERSION=1.0.0
WORKER_COUNT=8  # Number of parallel workers
MAX_MEMORY_GB=16
MAX_CPU_PERCENT=80

# ============================================================================
# REPOSITORY CONFIGURATION
# ============================================================================

# Bitbucket Configuration
BITBUCKET_URL=https://bitbucket.org
BITBUCKET_USERNAME=your_username
BITBUCKET_APP_PASSWORD=your_app_password_here
BITBUCKET_WORKSPACE=your_workspace
BITBUCKET_PROJECT_KEY=your_project_key
BITBUCKET_REPO_SLUG=your_repo_slug
BITBUCKET_BRANCH=main

# Alternative: Direct Repository Path
REPOSITORY_PATH=/path/to/local/repository
REPOSITORY_URL=git@bitbucket.org:workspace/repo.git
REPOSITORY_BRANCH=main

# Git Configuration
GIT_USERNAME=your_name
GIT_EMAIL=your_email@company.com
GIT_SSH_KEY_PATH=~/.ssh/id_rsa

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================

# Storage Paths
STORAGE_BASE_PATH=./storage
OUTPUT_BASE_PATH=./output
CACHE_PATH=./.cache
TEMP_PATH=./tmp

# Chunk Storage
CHUNK_STORAGE_BACKEND=sqlite  # sqlite, postgresql, mongodb, lmdb
CHUNK_STORAGE_PATH=${STORAGE_BASE_PATH}/chunks
CHUNK_COMPRESSION=lz4  # none, gzip, lz4, zstd
CHUNK_ENABLE_VERSIONING=true
CHUNK_MAX_VERSIONS=10

# Metadata Storage
METADATA_BACKEND=sqlite  # sqlite, postgresql, mongodb, elasticsearch
METADATA_STORAGE_PATH=${STORAGE_BASE_PATH}/metadata
METADATA_ENABLE_CACHE=true
METADATA_CACHE_SIZE=10000
METADATA_ENABLE_FULLTEXT=true

# Vector Storage
VECTOR_BACKEND=faiss  # faiss, hnswlib, milvus, chromadb, qdrant, pinecone
VECTOR_STORAGE_PATH=${STORAGE_BASE_PATH}/vectors
VECTOR_DIMENSION=768
VECTOR_METRIC=cosine  # cosine, euclidean, dot_product
VECTOR_INDEX_TYPE=hnsw  # flat, hnsw, ivf_flat, ivf_pq

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# SQLite (Default)
SQLITE_DB_PATH=${STORAGE_BASE_PATH}/pipeline.db
SQLITE_ENABLE_WAL=true

# PostgreSQL (Optional)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=code_analysis
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=your_password_here
POSTGRES_POOL_SIZE=10
POSTGRES_POOL_MAX_OVERFLOW=20

# MongoDB (Optional)
MONGODB_URI=mongodb://localhost:27017
MONGODB_DATABASE=code_analysis
MONGODB_USERNAME=mongo_user
MONGODB_PASSWORD=your_password_here
MONGODB_AUTH_SOURCE=admin

# Redis (Optional - for caching/queuing)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50

# Elasticsearch (Optional - for search)
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=your_password_here
ELASTICSEARCH_INDEX_PREFIX=code_chunks

# ============================================================================
# VECTOR DATABASE CONFIGURATION
# ============================================================================

# Milvus (Optional)
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=code_embeddings
MILVUS_INDEX_TYPE=IVF_FLAT
MILVUS_METRIC_TYPE=IP  # IP (Inner Product), L2

# ChromaDB (Optional)
CHROMADB_HOST=localhost
CHROMADB_PORT=8000
CHROMADB_COLLECTION_NAME=code_embeddings
CHROMADB_PERSIST_DIRECTORY=${STORAGE_BASE_PATH}/chromadb

# Qdrant (Optional)
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=code_embeddings
QDRANT_API_KEY=your_api_key_here

# Pinecone (Optional)
PINECONE_API_KEY=your_api_key_here
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=code-embeddings
PINECONE_DIMENSION=768

# Weaviate (Optional)
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your_api_key_here
WEAVIATE_CLASS_NAME=CodeChunk

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================

# Embedding Models
EMBEDDING_MODEL=microsoft/codebert-base  # microsoft/graphcodebert-base, microsoft/unixcoder-base
EMBEDDING_DIMENSION=768
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_LENGTH=512
EMBEDDING_USE_GPU=true
EMBEDDING_DEVICE=cuda  # cuda, cpu, mps (Apple Silicon)
EMBEDDING_CACHE_EMBEDDINGS=true
EMBEDDING_FP16=false

# Model Paths
MODEL_CACHE_DIR=${CACHE_PATH}/models
TOKENIZER_CACHE_DIR=${CACHE_PATH}/tokenizers

# Hugging Face
HUGGINGFACE_API_TOKEN=your_hf_token_here
HUGGINGFACE_CACHE_DIR=${MODEL_CACHE_DIR}/huggingface

# ============================================================================
# PROCESSING CONFIGURATION
# ============================================================================

# Chunk Processing
CHUNK_MAX_SIZE=450
CHUNK_MIN_SIZE=50
CHUNK_OVERLAP_SIZE=50
CHUNK_BATCH_SIZE=100
PRESERVE_STRUCTURE=true

# File Processing
MAX_FILE_SIZE_MB=10
SKIP_BINARY_FILES=true
SKIP_GENERATED_FILES=true
SKIP_TEST_FILES=false
INCLUDE_PATTERNS="*.py,*.java,*.js,*.ts,*.go,*.rust,*.cpp,*.c"
EXCLUDE_PATTERNS="*node_modules*,*venv*,*.git*,*__pycache__*"

# Quality Settings
ENABLE_QUALITY_CHECKS=true
QUALITY_THRESHOLD=0.7
ENABLE_PATTERN_DETECTION=true
PATTERN_CONFIDENCE_THRESHOLD=0.7

# Performance
ENABLE_PARALLEL_PROCESSING=true
MAX_WORKERS=8
USE_MULTIPROCESSING=true
BATCH_SIZE=100
QUEUE_MAX_SIZE=1000

# ============================================================================
# API CONFIGURATION
# ============================================================================

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true
API_CORS_ORIGINS=["http://localhost:3000"]
API_SECRET_KEY=your_secret_key_here_change_in_production
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=30

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_ENDPOINT=/metrics

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091
PROMETHEUS_JOB_NAME=code_analysis_pipeline

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_ENDPOINT=/health

# Tracing (Optional)
ENABLE_TRACING=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=code_analysis

# ============================================================================
# NOTIFICATION CONFIGURATION
# ============================================================================

# Email Notifications
EMAIL_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USE_TLS=true
EMAIL_USERNAME=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_FROM=noreply@codeanalysis.com
EMAIL_TO=["admin@company.com", "team@company.com"]

# Slack Notifications
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#code-analysis
SLACK_USERNAME=CodeAnalysisBot

# Webhook Notifications
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com
WEBHOOK_SECRET=your_webhook_secret
WEBHOOK_HEADERS='{"Authorization": "Bearer token"}'

# Microsoft Teams (Optional)
TEAMS_ENABLED=false
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/WEBHOOK/URL

# ============================================================================
# SCHEDULING & AUTOMATION
# ============================================================================

# Scheduler
SCHEDULER_ENABLED=false
SCHEDULER_TIMEZONE=UTC
SCHEDULER_CRON_EXPRESSION="0 2 * * *"  # Daily at 2 AM

# Background Jobs
ENABLE_BACKGROUND_JOBS=true
JOB_QUEUE_NAME=code_analysis_jobs
JOB_RETRY_MAX_ATTEMPTS=3
JOB_RETRY_DELAY_SECONDS=60

# Celery (Optional)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Authentication
AUTH_ENABLED=false
AUTH_METHOD=jwt  # jwt, oauth2, basic
JWT_SECRET_KEY=your_jwt_secret_key_change_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# OAuth2 (Optional)
OAUTH2_PROVIDER=github  # github, gitlab, bitbucket, google
OAUTH2_CLIENT_ID=your_client_id
OAUTH2_CLIENT_SECRET=your_client_secret
OAUTH2_REDIRECT_URI=http://localhost:8000/auth/callback

# API Keys
API_KEY_ENABLED=false
API_KEYS=["key1_for_service_a", "key2_for_service_b"]

# Encryption
ENCRYPTION_KEY=your_encryption_key_32_chars_long!!
ENCRYPT_SENSITIVE_DATA=true

# ============================================================================
# CLOUD SERVICES (Optional)
# ============================================================================

# AWS
AWS_ENABLED=false
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-west-2
AWS_S3_BUCKET=code-analysis-storage
AWS_SQS_QUEUE_URL=https://sqs.us-west-2.amazonaws.com/123456789/queue

# Google Cloud
GCP_ENABLED=false
GCP_PROJECT_ID=your-project-id
GCP_CREDENTIALS_PATH=/path/to/credentials.json
GCP_STORAGE_BUCKET=code-analysis-storage

# Azure
AZURE_ENABLED=false
AZURE_STORAGE_ACCOUNT=yourstorageaccount
AZURE_STORAGE_KEY=your_storage_key
AZURE_CONTAINER_NAME=code-analysis

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

# Testing
TEST_MODE=false
TEST_DATABASE_URL=sqlite:///test.db
TEST_SKIP_EXTERNAL_SERVICES=true
TEST_DATA_PATH=./tests/test_data

# Development
DEV_MODE=true
DEV_AUTO_RELOAD=true
DEV_VERBOSE_LOGGING=true
DEV_PROFILE_ENABLED=false
DEV_PROFILE_OUTPUT_PATH=./profiles

# Mock Services
MOCK_EMBEDDINGS=false
MOCK_STORAGE=false
MOCK_NOTIFICATIONS=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================

FEATURE_INCREMENTAL_PROCESSING=true
FEATURE_DISTRIBUTED_PROCESSING=false
FEATURE_REAL_TIME_ANALYSIS=false
FEATURE_AUTO_CATEGORIZATION=true
FEATURE_DUPLICATE_DETECTION=true
FEATURE_DEPENDENCY_ANALYSIS=true
FEATURE_SECURITY_SCANNING=true
FEATURE_PERFORMANCE_ANALYSIS=true

# ============================================================================
# BACKUP & RECOVERY
# ============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_PATH=./backups
BACKUP_SCHEDULE="0 3 * * *"  # Daily at 3 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Recovery
RECOVERY_MODE=false
RECOVERY_CHECKPOINT_PATH=./checkpoints
RECOVERY_FROM_TIMESTAMP=

# ============================================================================
# CUSTOM CONFIGURATION
# ============================================================================

# Add your custom configuration here
CUSTOM_SETTING_1=value1
CUSTOM_SETTING_2=value2